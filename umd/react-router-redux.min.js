!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react"),require("prop-types"),require("react-router"),require("immutable")):"function"==typeof define&&define.amd?define(["exports","react","prop-types","react-router","immutable"],e):e(t.ReactRouterRedux={},t.React,t.PropTypes,t.ReactRouter,t.Immutable)}(this,function(t,e,r,o,n){"use strict";function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function c(t){return function(){for(var e=arguments.length,r=Array(e),o=0;e>o;o++)r[o]=arguments[o];return{type:d,payload:{method:t,args:r}}}}var l="default"in e?e.default:e;r=r&&r.hasOwnProperty("default")?r.default:r;var p=Object.assign||function(t){for(var e=1;arguments.length>e;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},s="@@router/LOCATION_CHANGE",f={location:null},h=function(t){function e(){var r,o,n;u(this,e);for(var i=arguments.length,c=Array(i),l=0;i>l;l++)c[l]=arguments[l];return r=o=a(this,t.call.apply(t,[this].concat(c))),o.handleLocationChange=function(t){o.store.dispatch({type:s,payload:t})},n=r,a(o,n)}return i(e,t),e.prototype.componentWillMount=function(){var t=this.props,e=t.store,r=t.history;this.store=e||this.context.store,this.handleLocationChange(r.location)},e.prototype.componentDidMount=function(){var t=this.props.history;this.unsubscribeFromHistory=t.listen(this.handleLocationChange)},e.prototype.componentWillUnmount=function(){this.unsubscribeFromHistory&&this.unsubscribeFromHistory()},e.prototype.render=function(){return l.createElement(o.Router,this.props)},e}(e.Component);h.propTypes={store:r.object,history:r.object,children:r.node},h.contextTypes={store:r.object};var y=function(t){return t.router.location},d="@@router/CALL_HISTORY_METHOD",m=c("push"),b=c("replace"),g=c("go"),v=c("goBack"),O=c("goForward"),C={push:m,replace:b,go:g,goBack:v,goForward:O},w=function(t){return t.getIn(["router","location"])},R="@@router/LOCATION_CHANGE",_=n.fromJS({location:null});t.ConnectedRouter=h,t.routerMiddleware=function(t){return function(){return function(e){return function(r){if(r.type!==d)return e(r);var o=r.payload,n=o.method,u=o.args;t[n].apply(t,u)}}}},t.getLocation=y,t.createMatchSelector=function(t){var e=null,r=null;return function(n){var u=y(n).pathname;if(u===e)return r;e=u;var a=o.matchPath(u,t);return a&&r&&a.url===r.url||(r=a),r}},t.LOCATION_CHANGE=s,t.routerReducer=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.type,o=e.payload;return r===s?p({},t,{location:o}):t},t.CALL_HISTORY_METHOD=d,t.push=m,t.replace=b,t.go=g,t.goBack=v,t.goForward=O,t.routerActions=C,t.getLocationImmutable=w,t.createMatchSelectorImmutable=function(t){var e=null,r=null;return function(n){var u=w(n).get("pathname");if(u===e)return r;e=u;var a=o.matchPath(u,t);return a&&r&&a.url===r.url||(r=a),r}},t.routerReducerImmutable=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.type,o=e.payload;return r===R?t.set("location",n.fromJS(o)):t},Object.defineProperty(t,"__esModule",{value:!0})});
